<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.39.1">
    <meta name="project" content="hornbeam v1.0.0">


    <title>Hornbeam — hornbeam v1.0.0</title>

    <link rel="stylesheet" href="dist/html-erlang-7YNYEB7F.css" />

    <script defer src="dist/sidebar_items-DCB24D7B.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-HBZYRXZS.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="https://hornbeam.dev" class="sidebar-projectName" translate="no">
hornbeam
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.0.0
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of hornbeam</span>
            <div class="search-input-wrapper">
              <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
              <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
                <i class="ri-close-line ri-lg" title="Cancel search"></i>
              </button>
            </div>
          </label>
        </form>
        <div class="autocomplete">
        </div>
        <div class="engine-selector" data-multiple="false">
          <button type="button" class="engine-button" aria-label="Select search engine" aria-haspopup="true" aria-expanded="false">
            <i class="ri-search-2-line" aria-hidden="true"></i>
            <span class="engine-name">Default</span>
            <i class="ri-arrow-down-s-line" aria-hidden="true"></i>
          </button>
          <div class="engine-dropdown" hidden role="menu">

              <button type="button"
                      class="engine-option"
                      data-engine-url="search.html?q="
                      role="menuitemradio"
                      aria-checked="true">
                <span class="name">Default</span>
                <span class="help">In-browser search</span>
              </button>

          </div>
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>Hornbeam</h1>


      <a href="https://github.com/benoitc/hornbeam/blob/v1.0.0/README.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


<p><strong>Hornbeam</strong> is an Erlang-based WSGI/ASGI server that combines Python's web and ML capabilities with Erlang's strengths:</p><ul><li><strong>Python handles</strong>: Web apps (WSGI/ASGI), ML models, data processing</li><li><strong>Erlang handles</strong>: Scaling (millions of connections), concurrency (no GIL), distribution (cluster RPC), fault tolerance, shared state (ETS)</li></ul><p>The name combines &quot;horn&quot; (unicorn, like gunicorn) with &quot;BEAM&quot; (Erlang VM).</p><h2 id="features" class="section-heading"><a href="#features" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Features</span></h2><ul><li><strong>WSGI Support</strong>: Run standard WSGI Python applications</li><li><strong>ASGI Support</strong>: Run async ASGI Python applications (FastAPI, Starlette, etc.)</li><li><strong>WebSocket</strong>: Full WebSocket support for real-time apps</li><li><strong>HTTP/2</strong>: Via Cowboy, with multiplexing and server push</li><li><strong>Shared State</strong>: ETS-backed state accessible from Python (concurrent-safe)</li><li><strong>Distributed RPC</strong>: Call functions on remote Erlang nodes</li><li><strong>Pub/Sub</strong>: pg-based publish/subscribe messaging</li><li><strong>ML Integration</strong>: Cache ML inference results in ETS</li><li><strong>Lifespan</strong>: ASGI lifespan protocol for app startup/shutdown</li><li><strong>Hot Reload</strong>: Leverage Erlang's hot code reloading</li></ul><h2 id="quick-start" class="section-heading"><a href="#quick-start" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Quick Start</span></h2><pre><code class="makeup erlang" translate="no"><span class="c1">%% Start with a WSGI application</span><span class="w">
</span><span class="nc">hornbeam</span><span class="p">:</span><span class="nf">start</span><span class="p" data-group-id="8469266251-1">(</span><span class="s">&quot;myapp:application&quot;</span><span class="p" data-group-id="8469266251-1">)</span><span class="p">.</span><span class="w">

</span><span class="c1">%% Start ASGI app (FastAPI, Starlette, etc.)</span><span class="w">
</span><span class="nc">hornbeam</span><span class="p">:</span><span class="nf">start</span><span class="p" data-group-id="8469266251-2">(</span><span class="s">&quot;main:app&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8469266251-3">#{</span><span class="ss">worker_class</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">asgi</span><span class="p" data-group-id="8469266251-3">}</span><span class="p" data-group-id="8469266251-2">)</span><span class="p">.</span><span class="w">

</span><span class="c1">%% With all options</span><span class="w">
</span><span class="nc">hornbeam</span><span class="p">:</span><span class="nf">start</span><span class="p" data-group-id="8469266251-4">(</span><span class="s">&quot;myapp:application&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8469266251-5">#{</span><span class="w">
    </span><span class="ss">bind</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;0.0.0.0:8000&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">workers</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="ss">worker_class</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">asgi</span><span class="p">,</span><span class="w">
    </span><span class="ss">lifespan</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">auto</span><span class="w">
</span><span class="p" data-group-id="8469266251-5">}</span><span class="p" data-group-id="8469266251-4">)</span><span class="p">.</span></code></pre><h2 id="installation" class="section-heading"><a href="#installation" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Installation</span></h2><p>Add hornbeam to your <code class="inline">rebar.config</code>:</p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="4690260265-1">{</span><span class="ss">deps</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4690260265-2">[</span><span class="w">
    </span><span class="p" data-group-id="4690260265-3">{</span><span class="ss">hornbeam</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4690260265-4">{</span><span class="ss">git</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;https://github.com/benoitc/hornbeam.git&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4690260265-5">{</span><span class="ss">branch</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;main&quot;</span><span class="p" data-group-id="4690260265-5">}</span><span class="p" data-group-id="4690260265-4">}</span><span class="p" data-group-id="4690260265-3">}</span><span class="w">
</span><span class="p" data-group-id="4690260265-2">]</span><span class="p" data-group-id="4690260265-1">}</span><span class="p">.</span></code></pre><h2 id="python-integration" class="section-heading"><a href="#python-integration" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Python Integration</span></h2><h3 id="shared-state-ets" class="section-heading"><a href="#shared-state-ets" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Shared State (ETS)</span></h3><p>Python apps can use Erlang ETS for high-concurrency shared state:</p><pre><code class="python">from hornbeam_erlang import state_get, state_set, state_incr

def application(environ, start_response):
    # Atomic counter (millions of concurrent increments)
    views = state_incr(f'views:{path}')

    # Get/set cached data
    data = state_get('my_key')
    if data is None:
        data = compute_expensive()
        state_set('my_key', data)

    start_response('200 OK', [('Content-Type', 'text/plain')])
    return [f'Views: {views}'.encode()]</code></pre><h3 id="distributed-rpc" class="section-heading"><a href="#distributed-rpc" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Distributed RPC</span></h3><p>Call functions on remote Erlang nodes:</p><pre><code class="python">from hornbeam_erlang import rpc_call, nodes

def application(environ, start_response):
    # Get connected nodes
    connected = nodes()

    # Call ML model on GPU node
    result = rpc_call(
        'gpu@ml-server',      # Remote node
        'ml_model',           # Module
        'predict',            # Function
        [data],               # Args
        timeout_ms=30000
    )

    start_response('200 OK', [('Content-Type', 'application/json')])
    return [json.dumps(result).encode()]</code></pre><h3 id="ml-caching" class="section-heading"><a href="#ml-caching" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">ML Caching</span></h3><p>Use ETS to cache ML inference results:</p><pre><code class="python">from hornbeam_ml import cached_inference, cache_stats

def application(environ, start_response):
    # Automatically cached by input hash
    embedding = cached_inference(model.encode, text)

    # Check cache stats
    stats = cache_stats()  # {'hits': 100, 'misses': 10, 'hit_rate': 0.91}

    start_response('200 OK', [('Content-Type', 'application/json')])
    return [json.dumps({'embedding': embedding}).encode()]</code></pre><h3 id="pub-sub-messaging" class="section-heading"><a href="#pub-sub-messaging" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Pub/Sub Messaging</span></h3><pre><code class="python">from hornbeam_erlang import publish

def application(environ, start_response):
    # Publish to topic (all subscribers notified)
    count = publish('updates', {'type': 'new_item', 'id': 123})

    start_response('200 OK', [('Content-Type', 'application/json')])
    return [json.dumps({'subscribers_notified': count}).encode()]</code></pre><h2 id="examples" class="section-heading"><a href="#examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><h3 id="hello-world-wsgi" class="section-heading"><a href="#hello-world-wsgi" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Hello World (WSGI)</span></h3><pre><code class="python"># examples/hello_wsgi/app.py
def application(environ, start_response):
    start_response('200 OK', [('Content-Type', 'text/plain')])
    return [b'Hello from Hornbeam!']</code></pre><pre><code class="makeup erlang" translate="no"><span class="nc">hornbeam</span><span class="p">:</span><span class="nf">start</span><span class="p" data-group-id="8846250770-1">(</span><span class="s">&quot;app:application&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8846250770-2">#{</span><span class="ss">pythonpath</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="8846250770-3">[</span><span class="s">&quot;examples/hello_wsgi&quot;</span><span class="p" data-group-id="8846250770-3">]</span><span class="p" data-group-id="8846250770-2">}</span><span class="p" data-group-id="8846250770-1">)</span><span class="p">.</span></code></pre><h3 id="hello-world-asgi" class="section-heading"><a href="#hello-world-asgi" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Hello World (ASGI)</span></h3><pre><code class="python"># examples/hello_asgi/app.py
async def application(scope, receive, send):
    await send({
        'type': 'http.response.start',
        'status': 200,
        'headers': [[b'content-type', b'text/plain']],
    })
    await send({
        'type': 'http.response.body',
        'body': b'Hello from Hornbeam ASGI!',
    })</code></pre><pre><code class="makeup erlang" translate="no"><span class="nc">hornbeam</span><span class="p">:</span><span class="nf">start</span><span class="p" data-group-id="8768053012-1">(</span><span class="s">&quot;app:application&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8768053012-2">#{</span><span class="w">
    </span><span class="ss">worker_class</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">asgi</span><span class="p">,</span><span class="w">
    </span><span class="ss">pythonpath</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="8768053012-3">[</span><span class="s">&quot;examples/hello_asgi&quot;</span><span class="p" data-group-id="8768053012-3">]</span><span class="w">
</span><span class="p" data-group-id="8768053012-2">}</span><span class="p" data-group-id="8768053012-1">)</span><span class="p">.</span></code></pre><h3 id="websocket-chat" class="section-heading"><a href="#websocket-chat" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">WebSocket Chat</span></h3><pre><code class="python"># examples/websocket_chat/app.py
async def app(scope, receive, send):
    if scope['type'] == 'websocket':
        await send({'type': 'websocket.accept'})

        while True:
            message = await receive()
            if message['type'] == 'websocket.disconnect':
                break
            if message['type'] == 'websocket.receive':
                # Echo back
                await send({
                    'type': 'websocket.send',
                    'text': message.get('text', '')
                })</code></pre><pre><code class="makeup erlang" translate="no"><span class="nc">hornbeam</span><span class="p">:</span><span class="nf">start</span><span class="p" data-group-id="0567881755-1">(</span><span class="s">&quot;app:app&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0567881755-2">#{</span><span class="w">
    </span><span class="ss">worker_class</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">asgi</span><span class="p">,</span><span class="w">
    </span><span class="ss">pythonpath</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="0567881755-3">[</span><span class="s">&quot;examples/websocket_chat&quot;</span><span class="p" data-group-id="0567881755-3">]</span><span class="w">
</span><span class="p" data-group-id="0567881755-2">}</span><span class="p" data-group-id="0567881755-1">)</span><span class="p">.</span></code></pre><h3 id="embedding-service-with-ets-caching" class="section-heading"><a href="#embedding-service-with-ets-caching" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Embedding Service with ETS Caching</span></h3><p>See <code class="inline">examples/embedding_service/</code> for a complete ML embedding service using Erlang ETS for caching.</p><h3 id="distributed-ml-inference" class="section-heading"><a href="#distributed-ml-inference" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Distributed ML Inference</span></h3><p>See <code class="inline">examples/distributed_rpc/</code> for distributing ML inference across a cluster.</p><h2 id="running-with-gunicorn-for-comparison" class="section-heading"><a href="#running-with-gunicorn-for-comparison" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Running with Gunicorn (for comparison)</span></h2><p>All examples are designed to work with gunicorn too (with fallback functions):</p><pre><code class="makeup bash" translate="no"><span class=""># With gunicorn (single process, no Erlang features)
</span><span class="">cd examples/hello_wsgi
</span><span class="">gunicorn app:application
</span><span class="">
</span><span class=""># With hornbeam (Erlang concurrency, shared state, distribution)
</span><span class="">rebar3 shell
</span><span class="">&gt; hornbeam:start(&quot;app:application&quot;, #{pythonpath =&gt; [&quot;examples/hello_wsgi&quot;]}).
</span></code></pre><h2 id="configuration" class="section-heading"><a href="#configuration" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Configuration</span></h2><h3 id="via-hornbeam-start-2" class="section-heading"><a href="#via-hornbeam-start-2" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Via hornbeam:start/2</span></h3><pre><code class="makeup erlang" translate="no"><span class="nc">hornbeam</span><span class="p">:</span><span class="nf">start</span><span class="p" data-group-id="4528512400-1">(</span><span class="s">&quot;myapp:application&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4528512400-2">#{</span><span class="w">
    </span><span class="c1">%% Server</span><span class="w">
    </span><span class="ss">bind</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="4528512400-3">&lt;&lt;</span><span class="s">&quot;0.0.0.0:8000&quot;</span><span class="p" data-group-id="4528512400-3">&gt;&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">ssl</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">false</span><span class="p">,</span><span class="w">
    </span><span class="ss">certfile</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">undefined</span><span class="p">,</span><span class="w">
    </span><span class="ss">keyfile</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">undefined</span><span class="p">,</span><span class="w">

    </span><span class="c1">%% Protocol</span><span class="w">
    </span><span class="ss">worker_class</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">wsgi</span><span class="p">,</span><span class="w">  </span><span class="c1">% wsgi | asgi</span><span class="w">
    </span><span class="ss">http_version</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="4528512400-4">[</span><span class="ss">&#39;HTTP/1.1&#39;</span><span class="p">,</span><span class="w"> </span><span class="ss">&#39;HTTP/2&#39;</span><span class="p" data-group-id="4528512400-4">]</span><span class="p">,</span><span class="w">

    </span><span class="c1">%% Workers</span><span class="w">
    </span><span class="ss">workers</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="ss">timeout</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">30000</span><span class="p">,</span><span class="w">
    </span><span class="ss">keepalive</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="ss">max_requests</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">

    </span><span class="c1">%% ASGI</span><span class="w">
    </span><span class="ss">lifespan</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">auto</span><span class="p">,</span><span class="w">  </span><span class="c1">% auto | on | off</span><span class="w">

    </span><span class="c1">%% WebSocket</span><span class="w">
    </span><span class="ss">websocket_timeout</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
    </span><span class="ss">websocket_max_frame_size</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">16777216</span><span class="p">,</span><span class="w">  </span><span class="c1">% 16MB</span><span class="w">

    </span><span class="c1">%% Python</span><span class="w">
    </span><span class="ss">pythonpath</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="4528512400-5">[</span><span class="p" data-group-id="4528512400-6">&lt;&lt;</span><span class="s">&quot;.&quot;</span><span class="p" data-group-id="4528512400-6">&gt;&gt;</span><span class="p" data-group-id="4528512400-5">]</span><span class="w">
</span><span class="p" data-group-id="4528512400-2">}</span><span class="p" data-group-id="4528512400-1">)</span><span class="p">.</span></code></pre><h3 id="via-sys-config" class="section-heading"><a href="#via-sys-config" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Via sys.config</span></h3><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="3842939211-1">[</span><span class="w">
    </span><span class="p" data-group-id="3842939211-2">{</span><span class="ss">hornbeam</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3842939211-3">[</span><span class="w">
        </span><span class="p" data-group-id="3842939211-4">{</span><span class="ss">bind</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;127.0.0.1:8000&quot;</span><span class="p" data-group-id="3842939211-4">}</span><span class="p">,</span><span class="w">
        </span><span class="p" data-group-id="3842939211-5">{</span><span class="ss">workers</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="3842939211-5">}</span><span class="p">,</span><span class="w">
        </span><span class="p" data-group-id="3842939211-6">{</span><span class="ss">worker_class</span><span class="p">,</span><span class="w"> </span><span class="ss">wsgi</span><span class="p" data-group-id="3842939211-6">}</span><span class="p">,</span><span class="w">
        </span><span class="p" data-group-id="3842939211-7">{</span><span class="ss">timeout</span><span class="p">,</span><span class="w"> </span><span class="mi">30000</span><span class="p" data-group-id="3842939211-7">}</span><span class="p">,</span><span class="w">
        </span><span class="p" data-group-id="3842939211-8">{</span><span class="ss">pythonpath</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3842939211-9">[</span><span class="s">&quot;.&quot;</span><span class="p" data-group-id="3842939211-9">]</span><span class="p" data-group-id="3842939211-8">}</span><span class="w">
    </span><span class="p" data-group-id="3842939211-3">]</span><span class="p" data-group-id="3842939211-2">}</span><span class="w">
</span><span class="p" data-group-id="3842939211-1">]</span><span class="p">.</span></code></pre><h2 id="api-reference" class="section-heading"><a href="#api-reference" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">API Reference</span></h2><h3 id="hornbeam-module" class="section-heading"><a href="#hornbeam-module" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">hornbeam module</span></h3><table><thead><tr><th style="text-align: left;">Function</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr><td style="text-align: left;"><code class="inline">start(AppSpec)</code></td><td style="text-align: left;">Start server with WSGI/ASGI app</td></tr><tr><td style="text-align: left;"><code class="inline">start(AppSpec, Options)</code></td><td style="text-align: left;">Start server with options</td></tr><tr><td style="text-align: left;"><code class="inline">stop()</code></td><td style="text-align: left;">Stop the server</td></tr><tr><td style="text-align: left;"><code class="inline">register_function(Name, Fun)</code></td><td style="text-align: left;">Register Erlang function callable from Python</td></tr><tr><td style="text-align: left;"><code class="inline">register_function(Name, Module, Function)</code></td><td style="text-align: left;">Register module:function</td></tr><tr><td style="text-align: left;"><code class="inline">unregister_function(Name)</code></td><td style="text-align: left;">Unregister a function</td></tr></tbody></table><h3 id="python-hornbeam_erlang-module" class="section-heading"><a href="#python-hornbeam_erlang-module" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Python hornbeam_erlang module</span></h3><table><thead><tr><th style="text-align: left;">Function</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr><td style="text-align: left;"><code class="inline">state_get(key)</code></td><td style="text-align: left;">Get value from ETS (None if not found)</td></tr><tr><td style="text-align: left;"><code class="inline">state_set(key, value)</code></td><td style="text-align: left;">Set value in ETS</td></tr><tr><td style="text-align: left;"><code class="inline">state_incr(key, delta=1)</code></td><td style="text-align: left;">Atomically increment counter, return new value</td></tr><tr><td style="text-align: left;"><code class="inline">state_decr(key, delta=1)</code></td><td style="text-align: left;">Atomically decrement counter</td></tr><tr><td style="text-align: left;"><code class="inline">state_delete(key)</code></td><td style="text-align: left;">Delete key from ETS</td></tr><tr><td style="text-align: left;"><code class="inline">state_get_multi(keys)</code></td><td style="text-align: left;">Batch get multiple keys</td></tr><tr><td style="text-align: left;"><code class="inline">state_keys(prefix=None)</code></td><td style="text-align: left;">Get all keys, optionally by prefix</td></tr><tr><td style="text-align: left;"><code class="inline">rpc_call(node, module, function, args, timeout_ms)</code></td><td style="text-align: left;">Call function on remote node</td></tr><tr><td style="text-align: left;"><code class="inline">rpc_cast(node, module, function, args)</code></td><td style="text-align: left;">Async call (fire and forget)</td></tr><tr><td style="text-align: left;"><code class="inline">nodes()</code></td><td style="text-align: left;">Get list of connected Erlang nodes</td></tr><tr><td style="text-align: left;"><code class="inline">node()</code></td><td style="text-align: left;">Get this node's name</td></tr><tr><td style="text-align: left;"><code class="inline">publish(topic, message)</code></td><td style="text-align: left;">Publish to pub/sub topic</td></tr><tr><td style="text-align: left;"><code class="inline">call(name, *args)</code></td><td style="text-align: left;">Call registered Erlang function</td></tr><tr><td style="text-align: left;"><code class="inline">cast(name, *args)</code></td><td style="text-align: left;">Async call to registered function</td></tr></tbody></table><h3 id="python-hornbeam_ml-module" class="section-heading"><a href="#python-hornbeam_ml-module" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Python hornbeam_ml module</span></h3><table><thead><tr><th style="text-align: left;">Function</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr><td style="text-align: left;"><code class="inline">cached_inference(fn, input, cache_key=None, cache_prefix=&quot;ml&quot;)</code></td><td style="text-align: left;">Run inference with ETS caching</td></tr><tr><td style="text-align: left;"><code class="inline">cache_stats()</code></td><td style="text-align: left;">Get cache hit/miss statistics</td></tr></tbody></table><h2 id="development" class="section-heading"><a href="#development" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Development</span></h2><pre><code class="makeup bash" translate="no"><span class=""># Compile
</span><span class="">rebar3 compile
</span><span class="">
</span><span class=""># Run tests
</span><span class="">rebar3 ct
</span><span class="">
</span><span class=""># Start shell
</span><span class="">rebar3 shell
</span></code></pre><h2 id="license" class="section-heading"><a href="#license" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">License</span></h2><p>Apache License 2.0</p>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

  </div>
  <div class="bottom-actions-item">

      <a href="changelog.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Changelog
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/hornbeam/1.0.0" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/hornbeam/1.0.0">Hex Preview</a>

              (<a href="https://preview.hex.pm/preview/hornbeam/1.0.0/show/README.md">current file</a>)

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="hornbeam.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.39.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
