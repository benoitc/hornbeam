<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.39.1">
    <meta name="project" content="hornbeam v1.0.0">


    <title>hornbeam_lifespan â€” hornbeam v1.0.0</title>

    <link rel="stylesheet" href="dist/html-erlang-7YNYEB7F.css" />

    <script defer src="dist/sidebar_items-DCB24D7B.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-HBZYRXZS.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="https://hornbeam.dev" class="sidebar-projectName" translate="no">
hornbeam
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.0.0
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of hornbeam</span>
            <div class="search-input-wrapper">
              <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
              <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
                <i class="ri-close-line ri-lg" title="Cancel search"></i>
              </button>
            </div>
          </label>
        </form>
        <div class="autocomplete">
        </div>
        <div class="engine-selector" data-multiple="false">
          <button type="button" class="engine-button" aria-label="Select search engine" aria-haspopup="true" aria-expanded="false">
            <i class="ri-search-2-line" aria-hidden="true"></i>
            <span class="engine-name">Default</span>
            <i class="ri-arrow-down-s-line" aria-hidden="true"></i>
          </button>
          <div class="engine-dropdown" hidden role="menu">

              <button type="button"
                      class="engine-option"
                      data-engine-url="search.html?q="
                      role="menuitemradio"
                      aria-checked="true">
                <span class="name">Default</span>
                <span class="help">In-browser search</span>
              </button>

          </div>
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">hornbeam_lifespan</span> 
      <small class="app-vsn" translate="no">(hornbeam v1.0.0)</small>

    </h1>

      <a href="https://github.com/benoitc/hornbeam/blob/v1.0.0/src/hornbeam_lifespan.erl#L47" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>ASGI Lifespan protocol manager.</p><p>This module implements the ASGI lifespan protocol for application startup and shutdown events. It allows ASGI applications to perform initialization (loading ML models, connecting to databases) at startup and cleanup at shutdown.</p><h3 id="module-lifespan-protocol" class="section-heading"><a href="#module-lifespan-protocol" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text"><a name="Lifespan_Protocol">Lifespan Protocol</a></span></h3><p>The lifespan protocol consists of these events:</p><p>Startup: &lt;ol&gt; &lt;li&gt;Server sends: type = &quot;lifespan.startup&quot;&lt;/li&gt; &lt;li&gt;App responds: type = &quot;lifespan.startup.complete&quot; or type = &quot;lifespan.startup.failed&quot;&lt;/li&gt; &lt;/ol&gt;</p><p>Shutdown: &lt;ol&gt; &lt;li&gt;Server sends: type = &quot;lifespan.shutdown&quot;&lt;/li&gt; &lt;li&gt;App responds: type = &quot;lifespan.shutdown.complete&quot;&lt;/li&gt; &lt;/ol&gt;</p><h3 id="module-configuration" class="section-heading"><a href="#module-configuration" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text"><a name="Configuration">Configuration</a></span></h3><p>The lifespan setting can be: &lt;ul&gt; &lt;li&gt;auto: Detect if app supports lifespan (default)&lt;/li&gt; &lt;li&gt;on: Require lifespan support, fail if not supported&lt;/li&gt; &lt;li&gt;off: Disable lifespan protocol&lt;/li&gt; &lt;/ul&gt;</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#code_change/3" data-no-tooltip="" translate="no">code_change(OldVsn, State, Extra)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_state/0" data-no-tooltip="" translate="no">get_state()</a>

      </div>

        <div class="summary-synopsis"><p>Get the lifespan state (shared across requests).</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#handle_call/3" data-no-tooltip="" translate="no">handle_call(Request, From, State)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#handle_cast/2" data-no-tooltip="" translate="no">handle_cast(Request, State)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#handle_info/2" data-no-tooltip="" translate="no">handle_info(Info, State)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#init/1" data-no-tooltip="" translate="no">init(Opts)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#is_running/0" data-no-tooltip="" translate="no">is_running()</a>

      </div>

        <div class="summary-synopsis"><p>Check if lifespan is running.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#shutdown/0" data-no-tooltip="" translate="no">shutdown()</a>

      </div>

        <div class="summary-synopsis"><p>Run lifespan shutdown protocol.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#start_link/0" data-no-tooltip="" translate="no">start_link()</a>

      </div>

        <div class="summary-synopsis"><p>Start the lifespan manager.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#start_link/1" data-no-tooltip="" translate="no">start_link(Opts)</a>

      </div>

        <div class="summary-synopsis"><p>Start the lifespan manager with options.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#startup/0" data-no-tooltip="" translate="no">startup()</a>

      </div>

        <div class="summary-synopsis"><p>Run lifespan startup protocol.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#startup/1" data-no-tooltip="" translate="no">startup(Opts)</a>

      </div>

        <div class="summary-synopsis"><p>Run lifespan startup with options.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#terminate/2" data-no-tooltip="" translate="no">terminate(Reason, State)</a>

      </div>

    </div>

</div>

  </section>


  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>

    <div class="functions-list">
<section class="detail" id="code_change/3">

  <div class="detail-header">
    <a href="#code_change/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">code_change(OldVsn, State, Extra)</h1>


        <a href="https://github.com/benoitc/hornbeam/blob/v1.0.0/src/hornbeam_lifespan.erl#L205" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="get_state/0">

  <div class="detail-header">
    <a href="#get_state/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_state()</h1>


        <a href="https://github.com/benoitc/hornbeam/blob/v1.0.0/src/hornbeam_lifespan.erl#L114" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_state() -> <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:map/0">map</a>().</pre>

      </div>

<p>Get the lifespan state (shared across requests).</p>
  </section>
</section>
<section class="detail" id="handle_call/3">

  <div class="detail-header">
    <a href="#handle_call/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_call(Request, From, State)</h1>


        <a href="https://github.com/benoitc/hornbeam/blob/v1.0.0/src/hornbeam_lifespan.erl#L133" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="handle_cast/2">

  <div class="detail-header">
    <a href="#handle_cast/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_cast(Request, State)</h1>


        <a href="https://github.com/benoitc/hornbeam/blob/v1.0.0/src/hornbeam_lifespan.erl#L190" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="handle_info/2">

  <div class="detail-header">
    <a href="#handle_info/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_info(Info, State)</h1>


        <a href="https://github.com/benoitc/hornbeam/blob/v1.0.0/src/hornbeam_lifespan.erl#L193" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="init/1">

  <div class="detail-header">
    <a href="#init/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">init(Opts)</h1>


        <a href="https://github.com/benoitc/hornbeam/blob/v1.0.0/src/hornbeam_lifespan.erl#L126" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="is_running/0">

  <div class="detail-header">
    <a href="#is_running/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">is_running()</h1>


        <a href="https://github.com/benoitc/hornbeam/blob/v1.0.0/src/hornbeam_lifespan.erl#L119" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> is_running() -> <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:boolean/0">boolean</a>().</pre>

      </div>

<p>Check if lifespan is running.</p>
  </section>
</section>
<section class="detail" id="shutdown/0">

  <div class="detail-header">
    <a href="#shutdown/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">shutdown()</h1>


        <a href="https://github.com/benoitc/hornbeam/blob/v1.0.0/src/hornbeam_lifespan.erl#L109" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> shutdown() -> ok | {error, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Run lifespan shutdown protocol.</p>
  </section>
</section>
<section class="detail" id="start_link/0">

  <div class="detail-header">
    <a href="#start_link/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">start_link()</h1>


        <a href="https://github.com/benoitc/hornbeam/blob/v1.0.0/src/hornbeam_lifespan.erl#L87" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Start the lifespan manager.</p>
  </section>
</section>
<section class="detail" id="start_link/1">

  <div class="detail-header">
    <a href="#start_link/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">start_link(Opts)</h1>


        <a href="https://github.com/benoitc/hornbeam/blob/v1.0.0/src/hornbeam_lifespan.erl#L91" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Start the lifespan manager with options.</p>
  </section>
</section>
<section class="detail" id="startup/0">

  <div class="detail-header">
    <a href="#startup/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">startup()</h1>


        <a href="https://github.com/benoitc/hornbeam/blob/v1.0.0/src/hornbeam_lifespan.erl#L99" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> startup() -> ok | {error, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Run lifespan startup protocol.</p><p>This should be called after the application is loaded but before accepting requests.</p>
  </section>
</section>
<section class="detail" id="startup/1">

  <div class="detail-header">
    <a href="#startup/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">startup(Opts)</h1>


        <a href="https://github.com/benoitc/hornbeam/blob/v1.0.0/src/hornbeam_lifespan.erl#L104" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> startup(<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:map/0">map</a>()) -> ok | {error, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Run lifespan startup with options.</p>
  </section>
</section>
<section class="detail" id="terminate/2">

  <div class="detail-header">
    <a href="#terminate/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">terminate(Reason, State)</h1>


        <a href="https://github.com/benoitc/hornbeam/blob/v1.0.0/src/hornbeam_lifespan.erl#L196" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">


  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/hornbeam/1.0.0" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/hornbeam/1.0.0">Hex Preview</a>

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="hornbeam.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.39.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
